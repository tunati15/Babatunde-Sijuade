pipeline {
    agent any
    environment {
        AWS_DEFAULT_REGION = "us-east-1"
    }
     stages {
         stage("Build Image") {
            steps {
                sh 'docker login -u AWS -p $(aws ecr get-login-password --region us-east-1) public.ecr.aws/m3b4f0n4'
                sh 'docker build -t domo-project .'
                sh 'docker tag domo-project:latest public.ecr.aws/m3b4f0n4/domo-project:latest:""$BUILD_ID""'
                sh 'docker push public.ecr.aws/m3b4f0n4/domo-project:latest:""$BUILD_ID""'
           } 
         }
     }
} 